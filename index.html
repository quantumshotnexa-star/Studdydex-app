<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>StudyDex - Luminous Glass</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-base: #08080a;
            --glass-bg: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.02) 100%);
            --glass-border: rgba(255, 255, 255, 0.12);
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            
            --color-physics: #60a5fa;
            --color-chem: #34d399;
            --color-math: #fbbf24;
            --color-bio: #f472b6;
            --color-cs: #c084fc;

            --easing-smooth: cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; font-family: 'Inter', sans-serif;}

        body {
            background-color: var(--bg-base);
            background-image: radial-gradient(circle at 50% -10%, rgba(99, 102, 241, 0.15) 0%, transparent 50%),
            radial-gradient(circle at 0% 100%, rgba(16, 185, 129, 0.05) 0%, transparent 40%);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
        }

        .app-container { width: 100%; max-width: 500px; height: 100vh; display: flex; flex-direction: column; position: relative; }

        /* Navbar */
        .navbar {
            height: 64px;
            padding: 0 24px; 
            display: flex; align-items: center; justify-content: space-between;
            background: rgba(8, 8, 10, 0.8);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border-bottom: 1px solid var(--glass-border);
            z-index: 100;
            transform: translateY(-100%);
            transition: transform 0.5s var(--easing-smooth);
            gap: 12px;
        }

        .navbar.visible { transform: translateY(0); }

        .nav-btn {
            width: 40px; height: 40px;
            background: rgba(255, 255, 255, 0.05); border: 1px solid var(--glass-border);
            display: flex; align-items: center; justify-content: center;
            color: var(--text-primary); cursor: pointer; transition: transform 0.2s;
            border-radius: 50%;
        }
        .nav-btn:active { transform: scale(0.9); }

        .nav-title {
            font-family: 'Outfit', sans-serif;
            font-weight: 600; font-size: 0.9rem; letter-spacing: 2px; text-transform: uppercase;
            flex: 1; text-align: center;
        }

        /* Screens */
        .screen-container { flex: 1; position: relative; overflow-y: auto; scrollbar-width: none; }
        .screen {
            position: absolute; top: 0; left: 0; width: 100%;
            padding: 24px 20px 100px; opacity: 0; visibility: hidden;
            transform: translateY(20px); transition: opacity 0.4s ease, transform 0.5s ease;
        }
        .screen.active { opacity: 1; visibility: visible; transform: translateY(0); position: relative; z-index: 10; }

        /* Common Buttons */
        .glass-box {
            background: var(--glass-bg);
            backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            position: relative; margin-bottom: 14px; padding: 20px;
            display: flex; align-items: center; gap: 18px;
            cursor: pointer; 
            transition: transform 0.3s ease, background 0.3s;
        }

        .glass-box::before {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(to bottom right, rgba(255,255,255,0.05), transparent);
            pointer-events: none;
        }

        .glass-box:hover { background: rgba(255, 255, 255, 0.1); }
        .glass-box:active { transform: scale(0.97); }

        .content-stack h3 { font-family: 'Outfit'; font-size: 1.1rem; font-weight: 600; margin-bottom: 2px; }
        .content-stack p { font-size: 0.8rem; color: var(--text-secondary); margin-top: 2px; }
        
        /* Animation Classes */
        .stagger-enter { opacity: 0; animation: slideUpSpring 0.6s ease forwards; animation-delay: calc(var(--idx) * 0.06s); }
        @keyframes slideUpSpring { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        
        .header-label { font-family: 'Outfit'; font-size: 1.6rem; font-weight: 700; margin-bottom: 20px; color: var(--text-primary); }
        .hero-box { padding: 40px 0; text-align: center; }
        .hero-logo { width: 72px; height: 72px; border: 1px solid var(--glass-border); background: var(--glass-bg); display: flex; align-items: center; justify-content: center; font-size: 2rem; margin: 0 auto 20px; }
        
        .icon-sq { width: 52px; height: 52px; background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border); display: flex; align-items: center; justify-content: center; font-size: 1.4rem; flex-shrink: 0; }

        /* --- SPECIFIC PAGES STYLES --- */

        /* YRS BOXES (Big Grid) */
        .year-box-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
        }
        .year-card {
            height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            border: 1px solid var(--glass-border);
        }
        .year-card:last-child { grid-column: span 2; width: 100%; } 

        /* SETS LIST (Simple List) */
        .set-container { display: flex; flex-direction: column; gap: 14px; }
        .set-row {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 18px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: transform 0.2s ease;
        }
        .set-row:active { transform: scale(0.98); }
        .set-info h3 { font-size: 1.1rem; font-weight: 600; }
        .set-info p { font-size: 0.85rem; color: var(--text-secondary); margin: 0; }
        .set-icon { font-size: 1.4rem; color: var(--text-secondary); }

    </style>
</head>
<body>

    <div class="app-container">
        <nav class="navbar" id="navbar">
            <div class="nav-btn" onclick="app.back()"><i class="fas fa-arrow-left"></i></div>
            <div class="nav-title" id="nav-title">STUDYDEX</div>
            <div style="width: 40px"></div>
        </nav>

        <div class="screen-container">
            <!-- HOME SCREEN -->
            <section id="home" class="screen active">
                <div class="hero-box stagger-enter" style="--idx: 0;">
                    <div class="hero-logo"><i class="fas fa-layer-group"></i></div>
                    <h1 style="font-family: 'Outfit'; font-size: 2.5rem; font-weight: 700; letter-spacing: -1px;">StudyDex</h1>
                    <p style="color: var(--text-secondary); font-size: 0.95rem; margin-top: 6px;">Premium Class 12 Learning</p>
                </div>

                <!-- Button 1: EXPLORE -->
                <div class="glass-box stagger-enter" style="--idx: 1;" onclick="app.startPath('explore')">
                    <div class="icon-sq" style="color: var(--color-physics);">
                        <i class="fas fa-book-open"></i>
                    </div>
                    <div class="content-stack" style="flex: 1;">
                        <h3>Start Learning</h3>
                        <p>Browse the master curriculum</p>
                    </div>
                    <i class="fas fa-chevron-right" style="color: var(--text-secondary); font-size: 0.8rem;"></i>
                </div>

                <!-- Button 2: SAMPLE PAPERS -->
                <div class="glass-box stagger-enter" style="--idx: 2; border-color: rgba(192, 132, 252, 0.2);" onclick="app.startPath('sample')">
                    <div class="icon-sq" style="color: var(--color-cs);">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="content-stack" style="flex: 1;">
                        <h3>Sample Papers</h3>
                        <p>Past 5 Years PYQ</p>
                    </div>
                    <i class="fas fa-chevron-right" style="color: var(--text-secondary); font-size: 0.8rem;"></i>
                </div>

                <!-- Button 3: LEARN MORE -->
                <div class="glass-box stagger-enter" style="--idx: 3;" onclick="app.navigate('about')">
                    <div class="icon-sq" style="color: #f59e0b;">
                        <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="content-stack" style="flex: 1;">
                        <h3>About Project</h3>
                        <p>Our methodology & tech</p>
                    </div>
                    <i class="fas fa-chevron-right" style="color: var(--text-secondary); font-size: 0.8rem;"></i>
                </div>
            </section>

            <!-- SUBJECTS SCREEN -->
            <section id="subjects" class="screen">
                <h2 class="header-label stagger-enter" style="--idx: 0;" id="page-heading">SELECT SUBJECT</h2>
                <div id="subject-list"></div>
            </section>

            <!-- CHAPTERS SCREEN (Learning Path) -->
            <section id="chapters" class="screen">
                <h2 class="header-label stagger-enter" id="chapter-header" style="--idx: 0;">Modules</h2>
                <div id="chapter-list"></div>
            </section>

            <!-- QUESTION TYPES SCREEN (New Flow Link) -->
            <section id="questions" class="screen">
                <h2 class="header-label stagger-enter" id="question-header" style="--idx: 0;">Practice</h2>
                <div id="question-list"></div>
            </section>

            <!-- YEAR SELECTION SCREEN (Added) -->
            <section id="years" class="screen">
                <h2 class="header-label stagger-enter" style="--idx: 0;">Select Year</h2>
                <div class="year-box-grid" id="year-list"></div>
            </section>

            <!-- SET SELECTION SCREEN -->
            <section id="sets" class="screen">
                <h2 class="header-label stagger-enter" style="--idx: 0;" id="sets-header">Physics: 2024</h2>
                <div class="set-container" id="set-list"></div>
            </section>

            <!-- ABOUT SCREEN -->
            <section id="about" class="screen">
                <h2 class="header-label stagger-enter" style="--idx: 0;">Why StudyDex?</h2>
                
                <div class="glass-box stagger-enter" style="--idx: 1; flex-direction: column; align-items: flex-start; gap: 10px;">
                    <h3 style="color: var(--color-chem); display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-code"></i> Modern Tech Stack
                    </h3>
                    <p style="line-height: 1.6; font-size: 0.9rem;">Built with vanilla HTML/CSS/JS to ensure lightning-fast performance without heavy frameworks.</p>
                </div>

                <div class="glass-box stagger-enter" style="--idx: 2; flex-direction: column; align-items: flex-start; gap: 10px;">
                    <h3 style="color: var(--color-physics); display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-flask"></i> Competency Focused
                    </h3>
                    <p style="line-height: 1.6; font-size: 0.9rem;">Move beyond rote memorization. Emphasis on case studies, application-based problems, and reasoning.</p>
                </div>

                <div class="glass-box stagger-enter" style="--idx: 3; flex-direction: column; align-items: flex-start; gap: 10px;">
                    <h3 style="color: var(--color-math); display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-chart-line"></i> Adaptive Practice
                    </h3>
                    <p style="line-height: 1.6; font-size: 0.9rem;">Flexible navigation adapts to your study strategy instantly.</p>
                </div>
            </section>
        </div>
    </div>

    <script>
        // --- COMPLETE CBSE SYLLABUS DATA ---
        const DATA = {
            physics: { 
                name: "Physics", icon: "atom", color: "var(--color-physics)",
                chapters: ["Electric Charges And Fields", "Electrostatic Potential And Capacitance", "Current Electricity", "Moving Charges And Magnetism", "Magnetism And Matter", "Electromagnetic Induction", "Alternating Currents", "EM Waves", "Ray Optics", "Wave Optics", "Dual Nature", "Atoms", "Nuclei", "Semiconductor Electronics"] 
            },
            chemistry: { 
                name: "Chemistry", icon: "flask", color: "var(--color-chem)",
                chapters: ["The Solid State", "Solutions", "Electrochemistry", "Chemical Kinetics", "Surface Chemistry", "d & f Block Elements", "Coordination Compounds", "Haloalkanes & Haloarenes", "Alcohols Phenols Ethers", "Aldehydes Ketones Acids", "Amines", "Biomolecules", "Polymers", "Everyday Life"] 
            },
            maths: { 
                name: "Mathematics", icon: "infinity", color: "var(--color-math)",
                chapters: ["Relations & Functions", "Inverse Trigonometric Functions", "Matrices", "Determinants", "Continuity & Differentiability", "Applications of Derivatives", "Integrals", "Applications of Integrals", "Differential Equations", "Vector Algebra", "3D Geometry", "Linear Programming", "Probability"] 
            },
            biology: { 
                name: "Biology", icon: "dna", color: "var(--color-bio)",
                chapters: ["Reproduction in Organisms", "Sexual Reproduction in Plants", "Human Reproduction", "Reproductive Health", "Principles of Inheritance", "Molecular Basis of Inheritance", "Evolution", "Human Health & Disease", "Strategies for Food Production", "Microbes in Human Welfare", "Biotechnology Principles", "Biotech Applications", "Organisms & Populations", "Ecosystem", "Biodiversity", "Environmental Issues"] 
            },
            informatics: { 
                name: "Computer Sci.", icon: "code", color: "var(--color-cs)",
                chapters: ["Introduction to Python", "Python Libraries - Pandas", "Data Handling using Pandas", "Data Visualization", "Introduction to SQL", "Database Queries using SQL", "Understanding Data", "Data Management", "Information Security"] 
            }
        };

        // Question Definitions
        const QUESTIONS = [
            { id: 'mcq', name: "Multiple Choice", icon: "list-ul", desc: "Objective Test" },
            { id: 'vsa', name: "Very Short Answer", icon: "pen-clip", desc: "Precise Definitions" },
            { id: 'sa', name: "Short Answer", icon: "align-left", desc: "Explanation" },
            { id: 'la', name: "Long Answer", icon: "file-lines", desc: "Detailed Theory" },
            { id: 'case', name: "Case Study", icon: "magnifying-glass", desc: "Context Analysis" }
        ];

        const app = {
            history: ['home'],
            state: { sub: null, ch: null, source: 'explore' },

            init() {
                this.renderSubjects();
            },

            startPath(type) {
                this.state.source = type;
                document.getElementById('page-heading').textContent = type === 'sample' ? "SAMPLE PAPER" : "SELECT SUBJECT";
                this.navigate('subjects');
            },

            renderSubjects() {
                const list = document.getElementById('subject-list');
                list.innerHTML = Object.entries(DATA).map(([id, s], i) => `
                    <div class="glass-box stagger-enter" style="--idx: ${i+1}; border-color: ${s.color}33;" onclick="app.selectSubject('${id}')">
                        <div class="icon-sq" style="color: ${s.color};">
                            <i class="fas fa-${s.icon}"></i>
                        </div>
                        <div class="content-stack" style="flex: 1;">
                            <h3>${s.name}</h3>
                            <p>${s.chapters.length} Modules</p>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-secondary); font-size: 0.8rem;"></i>
                    </div>
                `).join('');
            },

            selectSubject(id) {
                this.state.sub = id;
                const s = DATA[id];
                
                if (this.state.source === 'sample') {
                    // SAMPLE PATH: Subject -> Years
                    document.getElementById('nav-title').textContent = `${s.name}: Past Papers`;
                    
                    const yearList = document.getElementById('year-list');
                    const YEARS = [2024, 2023, 2022, 2021, 2020];
                    
                    yearList.innerHTML = YEARS.map((yr, idx) => `
                        <div class="glass-box stagger-enter year-card" style="--idx: ${idx+1};" onclick="app.showSets('${s.name}', '${yr}')">
                            <i class="fas fa-calendar-check" style="margin-bottom: 10px; font-size: 1.5rem; color: ${s.color}"></i>
                            <span>${yr}</span>
                        </div>
                    `).join('');
                    this.navigate('years');
                } else {
                    // EXPLORE PATH: Subject -> Chapters
                    document.getElementById('chapter-header').textContent = s.name;
                    document.getElementById('nav-title').textContent = s.name.toUpperCase();

                    const list = document.getElementById('chapter-list');
                    list.innerHTML = s.chapters.map((ch, i) => `
                        <div class="glass-box stagger-enter" style="--idx: ${i+1};" onclick="app.selectChapter('${ch}')">
                            <div style="width: 24px; font-weight: 700; color: ${s.color}; font-size: 0.85rem; font-family: 'Outfit';">${String(i+1).padStart(2, '0')}</div>
                            <h4 style="font-size: 1rem; font-weight: 500; flex: 1;">${ch}</h4>
                            <i class="fas fa-chevron-right" style="font-size: 0.75rem; color: var(--text-secondary);"></i>
                        </div>
                    `).join('');
                    this.navigate('chapters');
                }
            },

            selectChapter(name) {
                this.state.ch = name;
                const list = document.getElementById('question-list');
                const s = DATA[this.state.sub];
                
                document.getElementById('question-header').textContent = name.substring(0, 25) + "...";
                
                // FIX: Ensure onClick event triggers navigateToYears immediately
                list.innerHTML = QUESTIONS.map((q, i) => `
                    <div class="glass-box stagger-enter" style="--idx: ${i+1}" onclick="app.navigateToYears(${s.color})">
                        <div class="icon-sq" style="color: ${s.color};">
                            <i class="fas fa-${q.icon}"></i>
                        </div>
                      
